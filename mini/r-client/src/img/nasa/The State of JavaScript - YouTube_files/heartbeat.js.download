(function(g){var window=this;var $5=function(a){g.V.call(this,{I:"button",ea:["ytp-offline-slate-button","ytp-button"],P:[{I:"div",M:"ytp-offline-slate-button-icon",ca:"{{icon}}"},{I:"div",M:"ytp-offline-slate-button-text",ca:"{{text}}"}]});this.F=a;this.C=this.B=null;this.hide();this.W("click",this.G,this)},rDa=function(a,b){!a.B&&b&&b.toggleButtonRenderer?a.B=b.toggleButtonRenderer:b&&b.toggleButtonRenderer||(a.B=null);
a6(a)},a6=function(a){if(a.B){if(a.B.isToggled){var b=a.B.toggledText?g.WO(a.B.toggledText):"";
a.update({text:b,icon:sDa(a.B.toggledIcon)})}else b=a.B.defaultText?g.WO(a.B.defaultText):"",a.update({text:b,icon:sDa(a.B.defaultIcon)});a.show()}else a.hide()},sDa=function(a){if(!a)return null;
switch(a.iconType){case "NOTIFICATIONS_NONE":return g.TU?{I:"div",ea:["ytp-icon","ytp-icon-notifications-none"]}:{I:"svg",U:{fill:"#fff",height:"24px",viewBox:"0 0 24 24",width:"24px"},P:[{I:"path",U:{d:"M12 22c1.1 0 2-.9 2-2h-4c0 1.1.9 2 2 2zm6-6v-5c0-3.07-1.63-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.64 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2zm-2 1H8v-6c0-2.48 1.51-4.5 4-4.5s4 2.02 4 4.5v6z"}}]};case "NOTIFICATIONS_ACTIVE":return g.rra();default:return null}},b6=function(a){g.V.call(this,
{I:"div",
M:"ytp-offline-slate",P:[{I:"div",M:"ytp-offline-slate-bar",P:[{I:"span",M:"ytp-offline-slate-icon",P:[g.TU?{I:"div",ea:["ytp-icon","ytp-icon-live-icon"]}:{I:"svg",U:{fill:"#fff",height:"100%",viewBox:"0 0 24 24",width:"100%"},P:[{I:"path",U:{d:"M16.94 6.91l-1.41 1.45c.9.94 1.46 2.22 1.46 3.64s-.56 2.71-1.46 3.64l1.41 1.45c1.27-1.31 2.05-3.11 2.05-5.09s-.78-3.79-2.05-5.09zM19.77 4l-1.41 1.45C19.98 7.13 21 9.44 21 12.01c0 2.57-1.01 4.88-2.64 6.54l1.4 1.45c2.01-2.04 3.24-4.87 3.24-7.99 0-3.13-1.23-5.96-3.23-8.01zM7.06 6.91c-1.27 1.3-2.05 3.1-2.05 5.09s.78 3.79 2.05 5.09l1.41-1.45c-.9-.94-1.46-2.22-1.46-3.64s.56-2.71 1.46-3.64L7.06 6.91zM5.64 5.45L4.24 4C2.23 6.04 1 8.87 1 11.99c0 3.13 1.23 5.96 3.23 8.01l1.41-1.45C4.02 16.87 3 14.56 3 11.99s1.01-4.88 2.64-6.54z"}},
{I:"circle",U:{cx:"12",cy:"12",r:"3"}}]}]},{I:"span",M:"ytp-offline-slate-buttons"},{I:"span",M:"ytp-offline-slate-messages",P:[{I:"div",M:"ytp-offline-slate-main-text",ca:"{{maintext}}"},{I:"div",M:"ytp-offline-slate-subtitle-text",ca:"{{subtitletext}}"}]}]},{I:"div",M:"ytp-offline-slate-final-day",P:[{I:"div",M:"ytp-offline-slate-final-day-line-1",ca:"Dawn of"},{I:"div",M:"ytp-offline-slate-final-day-line-2",ca:"The Final Day"},{I:"div",M:"ytp-offline-slate-final-day-line-3",ca:"-24 Hours Remain-"}]}]});
this.C=a;this.D=this.B=null;this.F=new g.U(this.H,1E3,this);this.R(a,"presentingplayerstatechange",this.J);this.R(a,"livestatedata",this.G);this.hide();a=this.C.getVideoData();a.getPlayerResponse()&&(a=a.getPlayerResponse().playabilityStatus)&&this.G(a)},c6=function(a,b,c){if(b){var d=void 0!=b.subtitleText?g.WO(b.subtitleText):"";
b=c?c:void 0!=b.mainText?g.WO(b.mainText):"";a.update({maintext:b,subtitletext:d});g.T(a.element,"ytp-offline-slate-single-text-line",!d)}},e6=function(a){g.BU.call(this,a);
this.G=!1;this.H=0;this.F=!1;this.o=window.NaN;this.A=this.B=null;this.C=!1;this.D=null;this.J=-(new g.Go).getTimezoneOffset();this.Z=new g.TF(this);g.M(this,this.Z);var b=this.player.getVideoData(),c=g.X(this.player);b.La?g.xJ()?!c.experiments.o("live_fresca_v2")||!g.pN(c)&&g.fN(c)||(this.G=this.C=!0,this.D=new b6(this.player),g.M(this,this.D),g.pU(this.player,this.D.element,4),(b=b.getPlayerResponse())&&b.playabilityStatus&&(this.A=b.playabilityStatus),this.A?(b=tDa(this.A.liveStreamability&&this.A.liveStreamability.liveStreamabilityRenderer))?
d6(this,b):d6(this,7500):d6(this,1E3)):g.dT(this.player.app.C,"html5.unsupportedlive","YTP_HTML5_NO_AVAILABLE_FORMATS_FALLBACK","nolive.1"):!c.experiments.o("html5_release_post_live_heartbeat_killswitch")&&g.Ma(b.cd,"heartbeat")&&g.oU(this.player,"heartbeat");this.Z.R(a,"heartbeatparams",this.OO);this.Z.R(a,"presentingplayerstatechange",this.PO);this.Z.R(a,"videoplayerreset",this.DW);this.Z.R(a,"crn_heartbeat",this.NO);this.C&&this.A&&uDa(this,this.A);b=new g.sQ(1E3,0x7ffffffffffff,{priority:0,namespace:"heartbeat"});
g.jU(a,[b])},vDa=function(a){a=a.player.getVideoData();
return!!g.qP(a)&&!a.Qu},f6=function(a){var b=a.player.getVideoData();
return vDa(a)?!!a.B:!!b.heartbeatToken},d6=function(a,b){if(!a.o&&a.G){var c=a.player.getVideoData();
if(f6(a)||c.La)void 0==b&&(b=a.F?a.C?7500:a.B?1E3*a.B.interval:a.player.getVideoData().heartbeatInterval||6E4:1E3),a.o=g.nE((0,g.B)(a.xX,a),b)}},uDa=function(a,b){var c=b.liveStreamability&&b.liveStreamability.liveStreamabilityRenderer,d=!(!c||!c.switchStreamsImmediately),e=tDa(c),f=a.player.getVideoData();
if(g.WT(a.player).qb()&&!g.vP(f)&&!a.player.isPeggedToLive()&&!d)return e;var k=(d=c&&c.streamTransitionEndpoint&&c.streamTransitionEndpoint.watchEndpoint)&&d.videoId;if(k)return g.a0(a.player.app,k,void 0,void 0,!0,!0,d),e;if("OK"==b.status.toUpperCase()){if(!f.hlsvp&&!f.wf||a.A&&c&&c.broadcastId!=a.A.liveStreamability.liveStreamabilityRenderer.broadcastId)return c={video_id:f.videoId},f.isLiveDestination&&(c.is_live_destination="1"),c.autonav_state=f.autonavState,a.player.zn(c),e;g.oU(a.player,
"heartbeat")}c&&c.displayEndscreen&&g.aU(a.player);return e},tDa=function(a){var b=0;
a&&a.pollDelayMs&&(a=(0,window.parseInt)(a.pollDelayMs,10))&&(b=a);return b},g6=function(a,b,c){if(a.o){a.o=window.NaN;
a.H++;var d=a.player.getVideoData();(d.heartbeatSoftFail?0:a.H>=(a.B?a.B.o:d.heartbeatRetries||5))?(b=b?"heartbeat.net":"heartbeat.servererror",(d=a.player.getVideoData())&&d.La?(d=g.wH("YTP_ERROR_STREAM_LICENSE_NOT_FOUND"),g.dT(a.player.app.C,b,d,c)):(d=g.wH("YTP_ERROR_LICENSE"),g.dT(a.player.app.C,b,d,c))):d6(a)}},h6=function(a){a.H=0;
a.o&&(g.pE(a.o),a.o=window.NaN);a.F=!1},wDa=function(a){try{var b=g.ux(a);
return null!=b?b:null}catch(c){return null}};
g.t($5,g.V);
$5.prototype.G=function(){this.C||(this.C=new g.KG(g.X(this.F).Ib));var a={context:g.vG(this.C.va)};if(this.B.isToggled){a.params=this.B.toggledServiceEndpoint.removeUpcomingEventReminderEndpoint.params;var b="notification/remove_upcoming_event_reminder"}else a.params=this.B.defaultServiceEndpoint.addUpcomingEventReminderEndpoint.params,b="notification/add_upcoming_event_reminder";var c={timeout:5E3};c.onError=(0,g.B)(this.D,this);c.Hd=(0,g.B)(this.D,this);g.yG(this.C,b,a,c);this.B.isToggled=!this.B.isToggled;
a6(this)};
$5.prototype.D=function(){this.B&&(this.B.isToggled=!this.B.isToggled,a6(this))};g.t(b6,g.V);
b6.prototype.G=function(a){var b=a&&a.liveStreamability&&a.liveStreamability.liveStreamabilityRenderer.offlineSlate;if(b){this.B=a;b.liveStreamOfflineSlateRenderer.canShowCountdown?this.H():c6(this,b.liveStreamOfflineSlateRenderer);var c=this.element;if(b&&b.liveStreamOfflineSlateRenderer&&b.liveStreamOfflineSlateRenderer.scheduledStartTime){var d=b.liveStreamOfflineSlateRenderer.scheduledStartTime-(0,g.H)()/1E3;d=86400>=d&&86340<d}else d=!1;g.T(c,"ytp-offline-slate-show-final-day",d);if(c=a&&a.liveStreamability&&
a.liveStreamability.liveStreamabilityRenderer&&a.liveStreamability.liveStreamabilityRenderer.offlineSlate&&a.liveStreamability.liveStreamabilityRenderer.offlineSlate.liveStreamOfflineSlateRenderer&&a.liveStreamability.liveStreamabilityRenderer.offlineSlate.liveStreamOfflineSlateRenderer.thumbnail){d=0;for(var e=null,f=0;f<c.thumbnails.length;f++)c.thumbnails[f].width>d&&(d=c.thumbnails[f].width,e=c.thumbnails[f].url);e&&(this.element.style.backgroundImage="url("+e+")")}else this.element.style.backgroundImage=
"";b.liveStreamOfflineSlateRenderer.actionButtons?(this.D||(this.D=new $5(this.C),this.D.xa(this.o["ytp-offline-slate-buttons"]),g.M(this,this.D)),rDa(this.D,b.liveStreamOfflineSlateRenderer.actionButtons[0])):this.D&&rDa(this.D,null);this.B=a}else this.B=null;this.J()};
b6.prototype.J=function(){var a=g.WT(this.C),b=this.C.getVideoData(),c=b.La&&(g.XP(a)||g.W(a,2)||g.W(a,64)),d=2==b.autonavState&&g.W(a,2);a=a.qb()&&!g.vP(b)&&!this.C.isPeggedToLive(!0);c&&!a&&!d&&this.B&&"LIVE_STREAM_OFFLINE"==this.B.status.toUpperCase()?this.A||(this.show(),this.C.V("offlineslatestatechange")):this.A&&(this.hide(),this.C.V("offlineslatestatechange"))};
b6.prototype.H=function(){var a=this.B&&this.B.liveStreamability&&this.B.liveStreamability.liveStreamabilityRenderer&&this.B.liveStreamability.liveStreamabilityRenderer.offlineSlate&&this.B.liveStreamability.liveStreamabilityRenderer.offlineSlate.liveStreamOfflineSlateRenderer;if(a){var b=Math.floor((0,g.H)()/1E3),c=a.canShowCountdown&&(0,window.parseInt)(a.scheduledStartTime,10);!c||c<=b?(c6(this,a),this.F.stop()):(b=g.aV(c-b),c6(this,a,b),g.zu(this.F))}};
b6.prototype.X=function(){this.F.dispose();this.F=null;g.V.prototype.X.call(this)};g.t(e6,g.BU);g.h=e6.prototype;g.h.X=function(){h6(this);g.nU(this.player,"heartbeat");g.BU.prototype.X.call(this)};
g.h.NO=function(){this.G=!0;d6(this,2E3)};
g.h.OO=function(a){this.B=a;d6(this,2E3)};
g.h.PO=function(a){g.W(a.state,2)||g.W(a.state,64)?(h6(this),this.C&&(this.G=!0,d6(this,1E3))):(g.W(a.state,1)||g.W(a.state,8))&&d6(this,2E3)};
g.h.DW=function(){3!==this.player.Sa()&&d6(this,2E3)};
g.h.xX=function(){var a=g.X(this.player),b=this.player.getVideoData();var c=a.baseYtUrl;if(3==this.player.Sa())this.o=window.NaN;else if(g.W(g.WT(this.player),4))this.o=window.NaN;else if(f6(this)||b.La){if(!vDa(this)||b.La){var d="GET";var e=a.A;a={video_id:b.videoId,heartbeat_token:b.heartbeatToken,c:e.c,cver:e.cver,cbrand:e.cbrand,cmodel:e.cmodel,vvt:b.tf,mdx_environment:b.mdxEnvironment,access_token:b.oauthToken,forced_experiments:a.forcedExperiments,utc_offset_minutes:this.J,upg_content_filter_mode:b.Pr};
(e=g.mP(b))&&(a.uloc=e);(e=this.player.Yk().ingestionTime)&&(0,window.isFinite)(e)&&(a.ingestion_time=e);c=g.Zg(c+"heartbeat",a)}else d="GET",c=g.Zg(this.B.url,{request_id:g.iH()}),b.tf&&(c=g.Zg(c,{vvt:b.tf}),b.mdxEnvironment&&(c=g.Zg(c,{mdx_environment:b.mdxEnvironment}))),b.oauthToken&&(c=g.Zg(c,{access_token:b.oauthToken}));b.Zm&&(c=g.Zg(c,{internalipoverride:b.Zm}));c=g.Zg(c,{cpn:b.clientPlaybackNonce});g.EE(c,{format:"RAW",method:d,timeout:3E4,onSuccess:(0,g.B)(this.SN,this),onError:(0,g.B)(this.RN,
this),Hd:(0,g.B)(this.TN,this),withCredentials:!0})}else h6(this)};
g.h.SN=function(a){if(this.o){a=a.responseText;var b=wDa(a);if(b){this.player.ya("onHeartbeat",b);var c="ok"==b.status?b.stop_heartbeat?2:0:"stop"==b.status?1:"live_stream_offline"==b.status?0:-1}else c=(c=a.match(xDa))?"0"==c[1]?0:1:-1;if(-1==c)b="decode",window.btoa&&(b+=" "+window.btoa(a)),g6(this,!1,b);else if(2!=c||f6(this))if(this.H=0,this.o=window.NaN,1==c){this.F=!1;b=this.player;c="YTP_ERROR_LICENSE";var d=wDa(a);d?a=d.reason||g.wH(c):((a=a.match(xDa))&&(a=(0,window.parseInt)(a[1],10))&&
(c=g.Jma(a)),a=g.wH(c));g.dT(b.app.C,"heartbeat.stop",a,void 0)}else this.F=!0,a=0,this.C&&b&&(a=uDa(this,b),this.player.V("livestatedata",b)),a?d6(this,a):d6(this);else h6(this),this.F=!0}};
g.h.RN=function(a){g6(this,!0,"net-"+a.status)};
g.h.TN=function(){g6(this,!0,"timeout")};
g.h.MO=function(){return!!this.D&&this.D.A};
var xDa=/^GLS\/1.0 (\d+) (\w+).*?\r\n\r\n([\S\s]*)$/;g.yX.heartbeat=e6;})(_yt_player);
